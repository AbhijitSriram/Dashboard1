<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Campus and Instructor Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <style>
    body {
      margin: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    #instructor-list, #courses-list {
      text-align: center;
      margin-top: 20px;
    }
    .dashboard-section {
      margin-bottom: 30px;
    }
  </style>
</head>
<body>
  <h1>Campus and Instructor Dashboard</h1>

  <!-- Campus Dropdown -->
  <div class="container col-md-6 offset-md-3 dashboard-section">
    <label for="campus-dropdown" class="form-label">Select a Campus:</label>
    <select id="campus-dropdown" class="form-select">
      <option value="">Select a campus</option>
    </select>
  </div>

  <!-- Instructors List -->
  <div class="container dashboard-section">
    <h3>Instructors:</h3>
    <ul id="instructor-list" class="list-group"></ul>
  </div>

  <!-- Courses List -->
  <div class="container dashboard-section">
    <h3>Courses Taught:</h3>
    <ul id="courses-list" class="list-group"></ul>
  </div>

  <script>
    // Load data from the JSON file
    fetch('course_instructors.json')
      .then(response => response.json())
      .then(data => {
        // Populate Campus Dropdown
        const campusDropdown = document.getElementById("campus-dropdown");
        const campuses = [...new Set(data.map(item => item.campus))];
        campuses.forEach(campus => {
          const option = document.createElement("option");
          option.value = campus;
          option.textContent = campus;
          campusDropdown.appendChild(option);
        });

        // Handle Dropdown Change Event
        campusDropdown.addEventListener("change", () => {
          const selectedCampus = campusDropdown.value;

          // Filter Data by Selected Campus
          const filteredData = data.filter(item => item.campus === selectedCampus);

          // Populate Instructors List
          const instructorList = document.getElementById("instructor-list");
          instructorList.innerHTML = ""; // Clear previous data
          const uniqueInstructors = [...new Map(filteredData.map(item => [item.email, item])).values()];
          if (uniqueInstructors.length === 0) {
            instructorList.textContent = "No instructors found.";
          } else {
            uniqueInstructors.forEach(instructor => {
              const li = document.createElement("li");
              li.className = "list-group-item";
              li.textContent = `${instructor.instructor_first_name} ${instructor.instructor_last_name} - ${instructor.email}`;
              instructorList.appendChild(li);
            });
          }

          // Populate Courses List
          const coursesList = document.getElementById("courses-list");
          coursesList.innerHTML = ""; // Clear previous data
          const uniqueCourses = [...new Set(filteredData.map(item => item.courses_taught))];
          if (uniqueCourses.length === 0) {
            coursesList.textContent = "No courses found.";
          } else {
            uniqueCourses.forEach(course => {
              const li = document.createElement("li");
              li.className = "list-group-item";
              li.textContent = course;
              coursesList.appendChild(li);
            });
          }
        });
      });
  </script>
</body>
</html>
